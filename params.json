{
  "name": "优办开放平台开发者文档",
  "tagline": "",
  "body": "# 一，\t开始前必读\r\n## 1，\t更新日志\r\n* 2016年4月15日  优办开放平台上线，提供获取当前登录用户信息接口，和管理员后台\r\n\r\n## 2，\t开发者规范\r\n开发者进行开放平台开发时，除了要满足接口的规范限制和接口调用频率限制外，还需特别注意用户敏感信息的使用规范。\r\n涉及用户数据时：\r\n* 您收集用户的数据后，必须采取必要的保护措施，防止用户数据被盗、泄漏等。\r\n* 如果优办认为您收集、使用用户数据的方式，可能损害用户体验，优办有权要求您删除相关数据并不得再以该方式收集、使用用户数据。\r\n* 一旦您停止使用本服务，或优办基于任何原因终止您使用本服务，您必须立即删除全部因使用本服务而获得的数据（包括各种备份）， 且不得再以任何方式进行使用。\r\n\r\n## 3，\t开放平台接口权限说明\r\n不同类型的开放平台账号具有不同的接口权限，见下表\r\n接口名称\r\n未认证开放平台账号\r\n优办认证开放平台账号\r\n获取accessToken\r\n有\r\n有\r\n获取用户基本信息\r\n无\r\n有\r\n其他接口待补充\r\n\r\n\r\n\r\n## 4，\t开放平台接口调用频率说明\r\n(1)开放平台的调用接口并不是无限制的。为了防止公众号的程序错误而引发优办服务器负载异常，默认情况下，每个开发者应用调用接口都不能超过一定限制，当超过一定限制时，调用对应接口会收到如下错误返回码\r\n{\"status\":4006,\"message\":\"接口调用频率超过限制\"}\r\n(2)认证账号的调用量清零。针对认证的开发者账号，每月提供10次清零操作机会，可以针对同一接口，也可以针对不同接口清零。新注册账号接口调用频率见下表\r\n接口\r\n每日限额\r\n获取accessToken\r\n2000\r\n获取用户基本信息\r\n5000000\r\n其他接口待补充\r\n\r\n\r\n## 5，\t开放平台接口返回说明\r\n应用每次调用接口时，可能获得正确或错误的返回码，开发者可以根据返回码信息调试接口，排查错误。见下表\r\n返回码\r\n说明\r\n0\r\n调用成功\r\n-1\r\n优办系统错误\r\n4000\r\n用户登录token错误\r\n4001\r\n用户登录token和accessToken错误，重新获取\r\n4002\r\naccessToken错误\r\n4003\r\nAccessToken超时\r\n4004\r\nAccessToken刷新过于频繁，注意每天的接口调用次数\r\n4005\r\naccessToken错误，一般是系统原因，重新获取或者联系客服\r\n4006\r\n接口调用频率超过限制\r\n4007\r\n获取accessToken时appId或者appSecret错误\r\n4008\r\n缺少accessToken参数\r\n4009\r\n需要get请求\r\n4010\r\n需要post请求\r\n4011\r\n需要https请求\r\n4012\r\nPost数据包为空\r\n4013\r\nApi无权限\r\n4014\r\n调用来源ip不在ip白名单\r\n4015\r\n不合法的callback url\r\n4016\r\n企业未对该应用授权\r\n4500\r\n用户uid不存在或者错误\r\n4501\r\n缺少uid参数\r\n\r\n# 二，\t开始开发\r\n## 1，\t接入指南\r\n概述\r\n接入优办开放平台，开发者需要完成以下3步：\r\na.\t提交服务器配置\r\n由于目前开发者后台还在公测中，还未对正式开发者开放，所有需要开发者把以下信息通过以下格式，以邮件（luohj@shinemo.com）发送给优办后台超级管理员，暂时由超级管理员负责录入,录入成功后会返回应用的appId和appSecret。\r\n名称\r\n说明\r\n开发者名字\r\n\r\n开发者地址\r\n\r\n开发者联系手机号\r\n\r\n开发者身份证号\r\n\r\n开发者照片\r\n照片形式放到附件中\r\n开发者企业名称\r\n\r\n开发者企业地址\r\n\r\n开发者企业法人代表名字\r\n\r\n开发者企业法人代表身份证号\r\n\r\n开发者企业营业执照\r\n照片形式放到附件\r\n开发者企业类型\r\n\r\n\r\n\r\n应用名称\r\n\r\n应用icon\r\n照片形式放到附件\r\n应用描述\r\n\r\n服务器白名单ip（优办开放平台服务端只允许白名单内的ip访问，逗号分隔）\r\n\r\nH5地址（应用如果是h5须填写h5地址）\r\n\r\nAndroid_feature(应用如果是native，填写android的应用信息)\r\n\r\nIos_feature(应用如果是native，填写ios的应用信息)\r\n\r\n应用的语言版本（中文 ，英文…）\r\n\r\n应用发布到的客户端（优办，集团彩云，联通客户端，全部）\r\n\r\n应用需要使用的接口列表（目前只有获取用户信息）\r\n\r\n应用的可见范围（企业名称或者全部）\r\n\r\n\r\nb.\t验证服务器地址有效性（暂时略过）\r\nc.\t依据接口文档实现业务逻辑\r\n调用各接口时，一般会获得正确的结果，具体结果可见对应接口的说明。返回错误时，可根据返回码来查询错误原因。\r\n另请注意，开放平台接口只支持80接口\r\n\r\n## 2，\t获取接口调用凭据（accessToken）\r\naccessToken是开放平台的全局唯一票据，开放平台各接口时都需使用accessToken。开发者需要进行妥善保存。accessToken的存储至少要保留512个字符空间。accessToken的有效期目前为2个小时，需定时刷新，重复获取将导致上次获取的accessToken失效。\r\n\r\n1、为了保密appSecrect，第三方需要一个accessToken获取和刷新的中控服务器。而其他业务逻辑服务器所使用的accessToken均来自于该中控服务器，不应该各自去刷新，否则会造成accessToken覆盖而影响业务；\r\n2、目前accessToken的有效期通过返回的expireIn来传达，目前是7200秒之内的值。中控服务器需要根据这个有效时间提前去刷新新accessToken。在刷新过程中，中控服务器对外输出的依然是老accessToken，此时公众平台后台会保证在刷新短时间内，新老accessToken都可用，这保证了第三方业务的平滑过渡；\r\n3、accessToken的有效时间可能会在未来有调整，所以中控服务器不仅需要内部定时主动刷新，还需要提供被动刷新accessToken的接口，这样便于业务服务器在API调用获知accessToken已超时的情况下，可以触发accessToken的刷新流程。\r\n使用AppID和AppSecret调用本接口来获取accessToken。AppID和AppSecret可在邮件回复中获得（需要提供上述的开发者信息邮件给超级管理员，且帐号没有异常状态）\r\n\r\n接口调用请求说明\r\nhttp请求方式: GET\r\nhttp://youbanapihost/openapi/token/get?appId=APPID&appSecret=APPSECRET\r\n参数说明：\r\n参数\r\n是否必须\r\n描述\r\nappId\r\n是\r\n应用注册成功后返回\r\nappSecret\r\n是\r\n应用注册成功后返回\r\n\r\n返回说明：\r\n正常情况下优办开放平台会返回下述JSON数据包给用户\r\n{\"status\":0,\"data\":{\"accessToken\":\"MDAwMjM0M0RBNjIwMURENDAxOTJDRkE0MkVGMDlERjQ5MjVFODAzQTlFMThERDBCMzNBNzFEMjBFMkRCNjExRDgxQjM3RkU0QzM1NkMwQzM5NkNCODUyN0JFQTE1OUE5OUUzMg==\",\"expiresIn\":7200}}\r\n参数\r\n描述\r\nstatus\r\n开放平台处理状态\r\ndata\r\n处理成功后会把数据字段放到这里\r\naccessToken\r\n访问凭据\r\nexpiresIn\r\n凭证有效时间，单位：秒\r\n错误时开放平台会返回错误码等信息，JSON数据包示例如下（该示例为AppID无效错误）\r\n{\"status\":4007,\"message\":\"获取accessToken时appId或者appSecret错误\"}\r\n\r\n## 3，\t测试号申请（暂未开放）\r\n## 4，\t接口在线调试（暂未开放）\r\n## 5，\t常见问题\r\n# 三，\t获取用户信息\r\n1，\t获取用户信息（优办登录token机制）\r\n\r\n2，\t获取用户信息（用户uid机制）\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}